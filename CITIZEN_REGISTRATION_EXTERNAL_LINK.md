# رابط التسجيل الخارجي للمواطنين

## التحديثات المنجزة

### 1. تغيير زر إضافة سجل جديد إلى رابط خارجي
- تم تغيير الزر من "طلب تسجيل جديد" إلى "رابط التسجيل للمواطنين"
- الرابط يفتح في نافذة جديدة (target="_blank")
- يمكن للمواطنين الآن التسجيل من خلال الرابط الخارجي بدلاً من النظام الداخلي

### 2. إصلاح زر الحذف
- تم إضافة CSRF token للصفحات
- تم تصحيح مسارات API في JavaScript
- تم تحسين معالجة الأخطاء في دالة الحذف

## كيفية إعداد الرابط الخارجي

### خيار 1: Google Forms
1. اذهب إلى [Google Forms](https://forms.google.com)
2. أنشئ نموذج جديد يحتوي على جميع الحقول المطلوبة
3. انسخ رابط النموذج واستبدله في الكود:
   ```html
   <a href="https://forms.google.com/your-actual-form-link" target="_blank" class="btn btn-success">
   ```

### خيار 2: Microsoft Forms
1. اذهب إلى [Microsoft Forms](https://forms.office.com)
2. أنشئ نموذج جديد
3. انسخ الرابط واستبدله

### خيار 3: نموذج مخصص
يمكنك إنشاء صفحة تسجيل مخصصة على موقع منفصل واستخدام الرابط الخاص بها.

## الحقول المطلوبة في النموذج الخارجي

بناءً على نموذج `CitizenRegistrationRequest`، يجب أن يحتوي النموذج على:

### البيانات الأساسية
- الاسم الكامل
- رقم الهوية (9 أرقام)
- رقم الجوال
- الجنس (ذكر/أنثى)
- المهنة الحالية

### البيانات العائلية
- عدد الأطفال
- الحالة الاجتماعية (أعزب/متزوج/مطلق/أرمل)
- عدد الزوجات

### بيانات الإقامة
- حالة الإقامة (مقيم/نازح/لاجئ)
- المحافظة الأصلية
- المدينة الأصلية
- عنوان النزوح

### العنوان والسكن
- الحي (قائمة منسدلة)
- نوع السكن (ملك/إيجار/مستأجر/إلخ)

## معالجة البيانات

بعد أن يملأ المواطن النموذج الخارجي، يمكنك:

1. **استيراد البيانات يدوياً**: تحميل البيانات من النموذج وإدخالها يدوياً
2. **ربط API**: إذا كان النموذج يدعم API، يمكن ربطه مباشرة مع النظام
3. **استيراد CSV**: تصدير البيانات كملف CSV واستيرادها للنظام

## ملاحظات أمنية

- تأكد من أن النموذج الخارجي آمن ويحمي بيانات المواطنين
- استخدم HTTPS للروابط
- فكر في إضافة CAPTCHA لمنع البوتات
- احتفظ بنسخة احتياطية من البيانات

## التحديثات المستقبلية

يمكن إضافة:
- ربط مباشر مع النموذج الخارجي عبر API
- إشعارات تلقائية عند تقديم طلب جديد
- تصدير البيانات تلقائياً للنظام
- لوحة تحكم منفصلة للمواطنين لتتبع حالة طلباتهم 